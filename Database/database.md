# 데이터베이스개론 2판 - 김연희

## 데이터베이스
많은 양의 데이터를 효과적으로 저장/수정/사용하기 위해 사용하는 것

<br>

## 키

### 외래키
테이블 간의 관계를 표현하는 키이다.  
다른 테이블의 기본키를 그대로 참조하는 속성의 집합이다.

```
고객 테이블 [고객아이디(pk), 고객이름, 나이, 등급, 직업, 적립금]
주문 테이블 [주문번호(pk), 주문고객(fk), 주문제품, 수량, 단가, 주문일자]
```
여기서 주문고객은 외래키로, 고객 테이블의 기본키인 고객아이디를 참조한다.
외래키의 사용으로 고객 테이블과 주문 테이블의 관계를 맺게 된다.

<br>

## 데이터베이스 설계

```
1. 요구사항 분석 - 요구 사항 명세서
2. 개념적 설계   - E-R 다이어그램
3. 논리적 설계   - 릴레이션 스키마
4. 물리적 설계   - 물리적 스키마
5. 구현
```

<br>

### 논리적 설계

#### 다대다 (n:m) 관계는 테이블(릴레이션)로 변환한다.
다대다 관계는 하나의 테이블로 변환한다.  
관계의 이름을 테이블 이름으로 하고, 관계의 속성도 테이블의 속성으로 변환한다.

관계를 맺고 있는 테이블의 기본키들을 관계 테이블에 포함시키고 외래키로 지정한다!

```
ex) 고객과 상품이 다대다 관계일 때 / 주문 관계로 연관

고객 테이블 [고객번호(pk), 이름, 주소, 등급]
상품 테이블 [상품번호(pk), 상품명, 재고량, 단가]

주문 테이블 [주문번호(pk), 고객번호(fk), 상품번호(fk), 주문수량]
```

<br>

#### 일대다 (1:n) 관계는 외래키로 표현한다.
1측 테이블의 기본키를 n측 테이블에 포함시키고 외래키로 지정한다.  
두 테이블 간 관계의 속성도 n측에 포함시킨다.

```
ex) 제조업체와 상품은 일대다 관계이며, 공급 관계로 연관되어있다.

제조업체 테이블 [제조업체명(pk), 전화번호, 위치, 담당자]
상품 테이블 [상품번호(pk), 상품명, 재고량, 단가, 제조업체명(fk), 공급수량(공급관계 속성)]
```

<br>

#### 일대일 (1:1) 관게는 외래키로 표현한다.
서로의 기본키를 주고받아 외래키로 지정한다.  
관계의 속성도 각 테이블에 포함시킨다.

```
ex) 남자와 여자는 일대일 관계이며, 혼인 관계로 연관되어있다.

남자 테이블 [남자번호(pk), 이름, 나이, 여자번호(fk), 결혼날짜(결혼관계 속성)]
여자 테이블 [여자번호(pk), 이름, 나이, 남자번호(fk), 결혼날짜(결혼관계 속성)]
```

<br>

## 트랜잭션
하나의 작업을 수행하는 데 필요한 데이터베이스 연산들을 모아놓은 것  
데이터베이스에서 논리적인 작업의 단위이다.  
작업 수행에 필요한 SQL 문들의 모임

```
ex) 계좌이체 트랜잭션, A 계좌에서 B 계좌로 이체

UPDATE 문 2개로 구성
A 계좌 -5000으로 UPDATE
B 계좌 +5000으로 UPDATE
```
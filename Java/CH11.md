## 11. 기본 API 클래스

### 환경 변수 읽기
환경 변수는 프로그램상의 변수가 아니라 운영체제에서 이름(Name)과 값(Value)으로 관리되는 문자열 정보이다.

``` java
String value = System.getenv("[얻고자 하는 환경변수 이름]");
String value = System.getenv("JAVA_HOME");
```

<br>

### Class 클래스
클래스와 인터페이스의 메타 데이터(클래스이름, 생성자정보, 필드정보, 메소드정보)가 담겨있다.

#### Class 객체 얻기

getClass()
``` java
Class clazz = obj.getClass();  // 모든 클래스에서 호출 가능
```

객체를 생성했을 때만 사용할 수 있다.

``` java
Car car = new Car();
// 객체를 생성했을 때 사용 가능
Class clazz1 = car.getClass();
System.out.println(clazz1.getName());
System.out.println(clazz1.getSimpleName());
System.out.println(clazz1.getPackage().getName());
```
```
[출력]
CH07.Car
Car
CH07
```

<br>

forName()
``` java
try {
    Class clazz = Class.forName(String className); // 패키지가 포함된 클래스이름을 매개값으로
} catch (ClassNotFoundException e)
```

객체를 생성하기 전에 사용할 수 있지만 try-catch를 해주어야 한다.

``` java
// 객체 생성 전에 사용
try {
    Class clazz2 = Class.forName("CH07.Car");
    System.out.println(clazz2.getName());
    System.out.println(clazz2.getSimpleName());
    System.out.println(clazz2.getPackage().getName());
} catch (ClassNotFoundException e) {
    e.printStackTrace();
}
```
```
[출력]
CH07.Car
Car
CH07
```

<br>

#### 리플렉션 (Reflection)
Class 객체를 이용해 클래스의 생성자, 필드, 메소드 정보를 알아내는 것

``` java
Constructor[] constructors = clazz.getDeclaredConstructors();

// 클래스에 선언된 멤버만 가져옮
Field[] fields = clazz.getDeclaredFields();
Method[] methods = clazz.getDeclaredMethods();

// 클래스에 선언된 멤버 + 상속된 멤버 가져옮 (public멤버만)
Field[] fields = clazz.getFields();
Method[] methods = clazz.getMethods();
```

<br>

#### 동적 객체 생성
Class 객체를 이용하면 new 연산자 없이 동적으로 객체 생성 가능

``` java
try {
    Class clazz = Class.forName("런타임 시 결정되는 클래스 이름");
    Object obj = clazz.newInstance();
} catch (ClassNotFoundException e) {
    ...
} catch (InstantiationException e) {
    ...
} catch (IllegalAccessException e) {
    ...
}
```
newInstance()는 기본 생성자를 호출해서 객체를 생성하기 때문에 기본 생성자가 존재해야 한다.  
매개 변수 있는 생성자 호출하려면 리플렉션으로 Constructor 객체를 얻어 newInstance() 호출

<br>

### String 클래스

#### 문자 추출
매개값으로 주어진 인덱스의 문자를 리턴한다.
``` java
String subject = "자바 프로그래밍";
char charValue = subject.charAt(3);
```
```
[출력]
프
```

#### 바이트 배열로 변환
문자열 -> 바이트 배열  
ex) 네트워크로 문자열 전송, 문자열 암호화

``` java
byte[] bytes = "문자열".getBytes();                 // 기본 문자셋으로 인코딩된 바이트 배열 리턴
byte[] bytes = "문자열".getBytes(Charset charset);  // 특정 문자셋으로 인코딩된 바이트 배열 리턴
```
특정 문자셋으로는 "EUC-KR", "UTF-8"등이 있다

<br>

``` java
String str = new String(byte[] bytes, String charsetName)
```
바이트 배열을 다시 문자열로 디코딩

<br>

#### 문자열 찾기 (indexOf())
매개값으로 주어진 문자열이 시작되는 인덱스를 리턴한다.  
문자열이 포함되어 있찌 않으면 -1을 리턴한다.

``` java
String subject = "자바 프로그래밍";
int index = subject.indexOf("프로그래밍");
```
```
[출력]
3
```

#### 문자열 대치 (replace())
첫 번째 매개값을 두 번째 매개값으로 대치하고 새로운 문자열을 생성하고 리턴하는 것이다.
``` java
String oldStr = "자바 프로그라밍"
String newStr = oldStr.replace("자바", "JAVA");
```
replace() 메소드가 리턴하는 문자열은 새로운 문자열이다.

<br>

### 날짜와 시간 다루기

java.time패키지를 통해 날짜와 시간을 다룰 수 있다.

<br>

#### 현재 시간을 얻기
``` java
LocalDate date = LocalDate.now();               // 년,월,일
LocalTime time = LocalTime.now();               // 시,분,초
LocalDateTime dateTime = LocalDateTime.now();   // 년,월,일,시,분,초
```

<br>

#### 특정 시간을 얻기
``` java
LocalDate dateOf = LocalDate.of(2022, 5,18);
LocalTime timeOf = LocalTime.of(16,13,30);
```

<br>

### 날짜, 시간 형식 수정
날짜와 시간의 형식을 원하는 형식으로 출력해보기
``` java
DateTimeFormatter formatter = DateTimeFormatter.ofLocalizedTime(FormatStyle.SHORT);
String shortFormat = formatter.format(LocalTime.now());
System.out.println(shortFormat);

DateTimeFormatter myFormatter = DateTimeFormatter.ofPattern("yyyy/MM/dd");
String myDate = myFormatter.format(LocalDate.now());
System.out.println(myDate);
```
```
[출력]
오후 4:53
2022/05/18
```

FormatStyle은 SHORT이외에 여러 개 있으며 자세한 사항은
[https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html) 참고

<br>

### 날짜와 시간의 차이 계산
Period 클래스의 between()메소드를 활용해 구할 수 있다.

``` java
LocalDate today = LocalDate.now();
LocalDate birthday = LocalDate.of(2022, 5, 27);
Period period = Period.between(today, birthday);
System.out.println(period.getMonths());
System.out.println(period.getDays());
```

```
[출력]
0
9
```